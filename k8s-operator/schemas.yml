
crd:
  VirtualService:
    type: object
    properties:
      spec:
        type: object
        x-kubernetes-preserve-unknown-fields: true
        properties:
          updateOwners:
            type: boolean
            default: false
          selector:
            $ref: '#/components/Selector'
          listener:
            $ref: ../openapi/l7mp-openapi.2.yaml#/components/schemas/Listener
        required: [selector, listener]
      status:
        type: object
        x-kubernetes-preserve-unknown-fields: true

  Target:
    type: object
    properties:
      status:
        type: object
        x-kubernetes-preserve-unknown-fields: true
      spec:
        type: object
        x-kubernetes-preserve-unknown-fields: true
        properties:
          cluster:
            $ref: ../openapi/l7mp-openapi.2.yaml#/components/schemas/Cluster
          selector:
            $ref: '#/components/Selector'

  Rule:
    type: object
    properties:
      status:
        type: object
        x-kubernetes-preserve-unknown-fields: true
      spec:
        type: object
        x-kubernetes-preserve-unknown-fields: true
        properties:
          position:
            type: integer
          rule:
            $ref: ../openapi/l7mp-openapi.2.yaml#/components/schemas/Rule
          rulelist:
            type: string
          selector:
            $ref: '#/components/Selector'


components:
  Selector:
    type: object
    x-kubernetes-preserve-unknown-fields: true
